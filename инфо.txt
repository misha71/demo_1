https://docs.github.com/en/actions
https://www.youtube.com/watch?v=ANj7qUgzNq4
https://www.youtube.com/watch?v=e0A2hDObLmg
Набор готовых actions
https://github.com/marketplace?category=&type=actions&verification=&query=node
триггеры для запуска
https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows

CI
Позволяет на различных платформах - GITHUB, GITLAB и других определять в специальном файле директивы, которые выполняет установку необходимых модулей, build проекта, запуск линтов и тестов при определенном событии, например при событии push на ветку main.

Пример в папках example, для GITHUB создается папка:
.github/workflow/любое название файла.yml

Дальше надо сделать push этого файла в репозиторий и при действиях, описанных в секции on на GitHub в меню Actions будет видно, что рабочий процесс запустился.



По файлу yml:
Важно использовать отступы при написании команд.

В нем устанавливаются директивы
Директивы с (-) это название команд (произвольные) 

В примере (см в папке), в случае при попытке сделать pull request в gitHub на ветку main при наличии ошибки в actions сделать не получится (к примеру, если не пройдут тесты), но если поправить и сделать push на ветку с которой был запущен merge request, то операция будет запущена заново и если пройдет, то получится сделать pull request.

- Триггеры запуска
В триггерах можно указать типы для конкретизации:
  pull_request:
    types: [opened, reopened]

Например так будет срабатывать, если pull request был открыт.
Также можно добавить исключение на запуск в зависимости от того, что было изменено, пример:
....
paths-ignore: 
 - '.github/workflows/*'
....

...
  paths-ignore:
      - 'docs/**'         # Игнорировать все изменения в директории docs
      - '*.md'            # Игнорировать все изменения в файлах с расширением .md
      - 'config/**'
....

То есть при изменении всего в папке github/workflows/ процессы запускаться не будут.

Если вы хотите, чтобы рабочий процесс запускался только при изменении определенных файлов или директорий, вы можете использовать paths

...

 paths:
      - 'src/**'       # Запускать только при изменениях в директории src
      - 'package.json'  # Запускать при изменениях в файле package.json

....

- Предустановленные Actions
uses actions/checkout@v3
uses - позволяет использовать уже готовый actions.
В данном случае данный actions позволяет получить код из репозитория в рабочую среду, чтобы последующие шаги могли работать с ним.

В целях оптимизации еще полезный actions, который кэширует данные, например зависимости, чтобы это не выполнять в другой задаче:

      - name: cache deps
        uses: actions/cache@v3
        with:
          path: ~/.npm
          key: node-modules-${{hashFiles('**/package-lock.json')}}

Для того, чтобы загрузить папку в git можно использовать:
actions/upload-artifact@v3
И
actions/download-artifact@v3

Это может быть полезно для:

- Сохранение результатов сборки
- Хранение отчетов о тестах
- Логи и диагностика
-  Передача данных между задачами

Пример применения в папке.

- Задачи
Задачи, которые не зависят друг от друга лучше описывать в отдельных задачах.
Тем не менее если требуется дождаться выполнение задачи в текущей задаче, то можно указать:
needs: test
Где test это название задачи, которую надо подождать.
При этом зависимость может быть от нескольких задач, тогда нужно записать так:
needs: [test, lint]

- Версии
Когда требуется поставить проект на определенные версии окружения:
Задаем переменные:
strategy:
 matrix:
  node-version: [14, 16]
  os: [ubuntu-latest, windows-latest] 

Используем:
runs-on: ${{matrix.os}}

При этом если нужно продолжать тестирование на других платформах, если произойдет ошибка на текущей, то добавляем параметр: continue-on-error: true перед ключом strategy.

Полезно на разных версиях сервера запускать build проекта.

- Общие правила
Если нужно выполнить несколько команд, то используется обратный слэш
run: |
echo ""
echo "" 

CD
Можно использовать специальные хостинги, в которые можно выгрузить приложение прямо через gitHub и настроить при какой  git (например при успешном push или merge request) операции будет запускать процесс build на сервере https://app.netlify.com/
Позволяет разворачивать докер контейнер на сервере, авторизовавший на нем.




